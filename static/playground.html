<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClawProof â€” free zkML proofs</title>
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #ffffff; --bg2: #f7f8fa; --bg3: #eef0f4;
            --border: #d8dce3; --border-light: #e8ebf0;
            --text: #111827; --text2: #4b5563; --text3: #9ca3af;
            --accent: #111827; --accent-h: #374151;
            --link: #2563eb;
            --green: #16a34a; --green-bg: #f0fdf4;
            --amber: #d97706; --amber-bg: #fffbeb;
            --red: #dc2626;
            --mono: 'SF Mono', 'Fira Code', Menlo, monospace;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); -webkit-font-smoothing: antialiased; }
        .page { max-width: 600px; margin: 0 auto; padding: 2.5rem 1.25rem 4rem; }

        /* Header */
        .header { margin-bottom: 2rem; }
        .wordmark { font-size: 1.25rem; font-weight: 700; letter-spacing: -0.02em; }
        .wordmark span { color: var(--text3); font-weight: 400; font-size: 1rem; }
        .tagline { color: var(--text2); font-size: 0.875rem; margin-top: 0.25rem; line-height: 1.5; }

        /* Demo banner */
        .demo { background: var(--bg2); border: 1px solid var(--border-light); border-radius: 10px; padding: 1.5rem; margin-bottom: 2rem; text-align: center; }
        .demo h2 { font-size: 0.9375rem; font-weight: 600; margin-bottom: 0.5rem; }
        .demo p { color: var(--text2); font-size: 0.8125rem; margin-bottom: 1rem; line-height: 1.5; }
        .demo-btn { display: inline-block; padding: 0.625rem 1.5rem; background: var(--accent); color: #fff; border: none; border-radius: 6px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: background 0.15s; }
        .demo-btn:hover { background: var(--accent-h); }
        .demo-btn:disabled { background: var(--bg3); color: var(--text3); cursor: not-allowed; }
        .demo-result { margin-top: 1rem; display: none; }
        .demo-label { font-size: 1.125rem; font-weight: 600; }
        .demo-meta { color: var(--text3); font-size: 0.75rem; margin-top: 0.25rem; }
        .demo-status { display: inline-flex; align-items: center; gap: 0.375rem; margin-top: 0.5rem; font-size: 0.8125rem; font-weight: 500; }
        .dot { width: 6px; height: 6px; border-radius: 50%; }
        .dot.proving { background: var(--amber); animation: pulse 1.5s ease-in-out infinite; }
        .dot.verified { background: var(--green); }
        .dot.failed { background: var(--red); }
        @keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:0.4; } }
        .demo-link { display: inline-block; margin-top: 0.5rem; font-family: var(--mono); font-size: 0.6875rem; color: var(--link); text-decoration: none; }
        .demo-link:hover { text-decoration: underline; }

        /* Tabs */
        .tabs { display: flex; gap: 0; border-bottom: 1px solid var(--border); margin-bottom: 1.5rem; }
        .tab { padding: 0.5rem 1rem; font-size: 0.8125rem; font-weight: 500; color: var(--text3); background: none; border: none; cursor: pointer; border-bottom: 2px solid transparent; transition: color 0.15s, border-color 0.15s; }
        .tab:hover { color: var(--text2); }
        .tab.active { color: var(--text); border-bottom-color: var(--accent); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Model cards */
        .models-grid { display: grid; gap: 0.75rem; }
        .model-card { border: 1px solid var(--border-light); border-radius: 8px; padding: 1rem; cursor: pointer; transition: border-color 0.15s, box-shadow 0.15s; }
        .model-card:hover { border-color: var(--accent); box-shadow: 0 1px 4px rgba(0,0,0,0.06); }
        .model-card.selected { border-color: var(--accent); background: var(--bg2); }
        .model-card h3 { font-size: 0.875rem; font-weight: 600; }
        .model-card .desc { color: var(--text2); font-size: 0.75rem; margin-top: 0.25rem; line-height: 1.4; }
        .model-card .meta { color: var(--text3); font-size: 0.6875rem; margin-top: 0.5rem; font-family: var(--mono); }

        /* Form elements */
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; font-size: 0.8125rem; font-weight: 500; color: var(--text2); margin-bottom: 0.375rem; }
        select, textarea, input[type="number"], input[type="text"], input[type="file"] {
            width: 100%; padding: 0.5rem 0.625rem; background: var(--bg); border: 1px solid var(--border);
            border-radius: 6px; color: var(--text); font-size: 0.875rem; font-family: inherit; outline: none;
            transition: border-color 0.15s; line-height: 1.5;
        }
        select:focus, textarea:focus, input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(17,24,39,0.08); }
        textarea { resize: vertical; min-height: 72px; }
        .fields-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
        .field-item .form-label { font-size: 0.75rem; }
        .field-range { color: var(--text3); font-weight: 400; }
        .field-item input { padding: 0.4375rem 0.5rem; font-size: 0.8125rem; }
        .submit-btn { width: 100%; padding: 0.625rem; background: var(--accent); color: #fff; border: none; border-radius: 6px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: background 0.15s; margin-top: 0.5rem; }
        .submit-btn:hover { background: var(--accent-h); }
        .submit-btn:disabled { background: var(--bg3); color: var(--text3); cursor: not-allowed; }
        .error-msg { color: var(--red); font-size: 0.8125rem; text-align: center; margin-top: 0.75rem; }

        /* Result card (reused for Try It tab) */
        .result-card { border: 1px solid var(--border); border-radius: 8px; overflow: hidden; margin-top: 1rem; display: none; }
        .result-top { padding: 1rem; text-align: center; }
        .result-prediction { font-size: 1.125rem; font-weight: 600; }
        .result-confidence { color: var(--text3); font-size: 0.8125rem; margin-top: 0.125rem; }
        .result-bottom { display: flex; align-items: center; justify-content: space-between; padding: 0.625rem 1rem; background: var(--bg2); border-top: 1px solid var(--border-light); }

        /* Upload zone */
        .upload-zone { border: 2px dashed var(--border); border-radius: 8px; padding: 2rem; text-align: center; cursor: pointer; transition: border-color 0.15s, background 0.15s; }
        .upload-zone:hover { border-color: var(--accent); background: var(--bg2); }
        .upload-zone.dragover { border-color: var(--accent); background: var(--bg2); }
        .upload-zone h3 { font-size: 0.875rem; font-weight: 600; margin-bottom: 0.25rem; }
        .upload-zone p { color: var(--text3); font-size: 0.75rem; }
        .upload-zone input { display: none; }

        /* Agent code blocks */
        pre { font-family: var(--mono); font-size: 0.6875rem; background: var(--bg2); border: 1px solid var(--border-light); border-radius: 6px; padding: 0.75rem; overflow-x: auto; margin: 0.5rem 0; line-height: 1.6; color: var(--text); }
        code { font-family: var(--mono); font-size: 0.75rem; background: var(--bg3); padding: 0.125rem 0.375rem; border-radius: 3px; }
        .agent-section h4 { font-size: 0.8125rem; font-weight: 600; margin: 1rem 0 0.375rem; }
        .agent-section h4:first-child { margin-top: 0; }
        .agent-section p { color: var(--text2); font-size: 0.8125rem; line-height: 1.6; }

        /* Footer */
        .footer { text-align: center; margin-top: 2.5rem; padding-top: 1rem; border-top: 1px solid var(--border-light); color: var(--text3); font-size: 0.6875rem; }
        .footer a { color: var(--text3); text-decoration: none; }
        .footer a:hover { color: var(--text2); }
    </style>
</head>
<body>
<div class="page">
    <div class="header">
        <div class="wordmark">ClawProof <span>/ zkML</span></div>
        <p class="tagline">Free zero-knowledge proofs of ML inference. No API keys, no auth. Bring your own model or use ours.</p>
    </div>

    <!-- One-click demo -->
    <div class="demo">
        <h2>See it work</h2>
        <p>Generate a real SNARK proof in one click. We'll classify a sample transaction and prove the result cryptographically.</p>
        <button class="demo-btn" id="demo-btn" onclick="runDemo()">Prove it</button>
        <div class="demo-result" id="demo-result">
            <div class="demo-label" id="demo-label"></div>
            <div class="demo-meta" id="demo-confidence"></div>
            <div class="demo-status">
                <span class="dot" id="demo-dot"></span>
                <span id="demo-status-text"></span>
            </div>
            <br>
            <a class="demo-link" id="demo-link" target="_blank"></a>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="switchTab('try')">Try it</button>
        <button class="tab" onclick="switchTab('upload')">Upload model</button>
        <button class="tab" onclick="switchTab('agents')">For agents</button>
    </div>

    <!-- Tab: Try It -->
    <div class="tab-content active" id="tab-try">
        <div class="models-grid" id="models-grid">Loading models...</div>
        <div id="input-area" style="margin-top:1rem;"></div>
        <button class="submit-btn" id="prove-btn" disabled onclick="prove()">Generate proof</button>
        <div id="error" class="error-msg"></div>
        <div class="result-card" id="result">
            <div class="result-top">
                <div class="result-prediction" id="res-label"></div>
                <div class="result-confidence" id="res-confidence"></div>
            </div>
            <div class="result-bottom">
                <div class="demo-status"><span class="dot" id="res-dot"></span><span id="res-status-text"></span></div>
                <a class="demo-link" id="res-link" target="_blank"></a>
            </div>
        </div>
    </div>

    <!-- Tab: Upload Model -->
    <div class="tab-content" id="tab-upload">
        <div class="upload-zone" id="upload-zone" onclick="document.getElementById('upload-file').click()">
            <h3>Drop an ONNX model here</h3>
            <p>or click to browse &middot; max 5MB &middot; .onnx, .pt, .pkl</p>
            <input type="file" id="upload-file" accept=".onnx,.pt,.pth,.pkl,.pb">
        </div>
        <div id="upload-form" style="display:none; margin-top:1rem;">
            <p style="font-size:0.8125rem; color:var(--text2); margin-bottom:1rem;" id="upload-filename"></p>
            <div class="form-group">
                <label class="form-label">Model name</label>
                <input type="text" id="up-name" placeholder="My model">
            </div>
            <div class="form-group">
                <label class="form-label">Input vector (JSON array of integers)</label>
                <textarea id="up-input" placeholder="[0, 1, 2, 3, ...]" rows="3"></textarea>
            </div>
            <div class="fields-grid">
                <div class="form-group">
                    <label class="form-label">Labels (JSON array)</label>
                    <input type="text" id="up-labels" placeholder='["class_a", "class_b"]'>
                </div>
                <div class="form-group">
                    <label class="form-label">Trace length</label>
                    <input type="number" id="up-trace" value="16384" min="4096" step="1">
                </div>
            </div>
            <button class="submit-btn" id="upload-prove-btn" onclick="uploadAndProve()">Upload &amp; prove</button>
            <div id="upload-error" class="error-msg"></div>
            <div class="result-card" id="upload-result">
                <div class="result-top">
                    <div class="result-prediction" id="up-res-label"></div>
                    <div class="result-confidence" id="up-res-confidence"></div>
                </div>
                <div class="result-bottom">
                    <div class="demo-status"><span class="dot" id="up-res-dot"></span><span id="up-res-status-text"></span></div>
                    <a class="demo-link" id="up-res-link" target="_blank"></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab: For Agents -->
    <div class="tab-content" id="tab-agents">
        <div class="agent-section">
            <h4>One-call proof (curl)</h4>
<pre>curl -X POST https://clawproof.onrender.com/prove \
  -H "Content-Type: application/json" \
  -d '{"model_id":"sentiment","input":{"text":"The stock market rallied today"}}'</pre>

            <h4>Upload &amp; prove your own model</h4>
<pre>curl -X POST https://clawproof.onrender.com/prove/model \
  -F "onnx_file=@model.onnx" \
  -F "input_raw=[0, 1, 2, 3]" \
  -F "input_dim=4" \
  -F 'labels=["yes","no"]'</pre>

            <h4>Install the skill (OpenClaw / Moltbook)</h4>
<pre>https://raw.githubusercontent.com/hshadab/clawproof/main/SKILL.md</pre>

            <h4>Python SDK</h4>
<pre>pip install clawproof

from clawproof import ClawProof
cp = ClawProof()
receipt = cp.prove_and_wait("sentiment",
    text="The stock market rallied today")
print(receipt.output.label)</pre>

            <h4>JavaScript SDK</h4>
<pre>npm install clawproof

import { ClawProof } from "clawproof";
const cp = new ClawProof();
const receipt = await cp.proveAndWait("sentiment", {
  text: "The stock market rallied today"
});</pre>

            <h4>MCP (Claude Desktop)</h4>
<pre>{
  "mcpServers": {
    "clawproof": {
      "command": "clawproof-mcp",
      "env": { "CLAWPROOF_URL": "https://clawproof.onrender.com" }
    }
  }
}</pre>

            <h4>Endpoints</h4>
            <p>
                <code>GET /models</code> &middot;
                <code>POST /prove</code> &middot;
                <code>POST /prove/model</code> &middot;
                <code>POST /prove/batch</code> &middot;
                <code>GET /receipt/{id}</code> &middot;
                <code>POST /verify</code> &middot;
                <code>GET /badge/{id}</code> &middot;
                <code>GET /metrics</code> &middot;
                <code>POST /models/upload</code> &middot;
                <code>GET /openapi.json</code>
            </p>
        </div>
    </div>

    <div class="footer">
        <a href="https://github.com/hshadab/clawproof">GitHub</a> &middot;
        <a href="/openapi.json">OpenAPI</a> &middot;
        <a href="https://github.com/ICME-Lab/jolt-atlas">JOLT-Atlas</a> &middot;
        Free &amp; open source (MIT)
    </div>
</div>

<script>
let models = [];
let selectedModel = null;
let pollTimer = null;

// --- Tabs ---
function switchTab(name) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelector(`.tab-content#tab-${name}`).classList.add('active');
    event.target.classList.add('active');
}

// --- Demo ---
async function runDemo() {
    const btn = document.getElementById('demo-btn');
    const res = document.getElementById('demo-result');
    btn.disabled = true; btn.textContent = 'Proving...';
    res.style.display = 'none';

    try {
        const r = await fetch('/prove', {
            method: 'POST', headers: {'Content-Type':'application/json'},
            body: JSON.stringify({model_id:'authorization',input:{fields:{budget:10,trust:5,amount:3,category:1,velocity:2,day:3,time:1,risk:0}}})
        });
        const data = await r.json();
        if (!r.ok) throw new Error(data.error || 'Request failed');

        document.getElementById('demo-label').textContent = data.output.label;
        document.getElementById('demo-confidence').textContent = (data.output.confidence * 100).toFixed(1) + '% confidence';
        setDot('demo-dot', 'demo-status-text', 'proving');
        const link = document.getElementById('demo-link');
        link.href = '/receipt/' + data.receipt_id;
        link.textContent = 'View receipt';
        res.style.display = 'block';

        pollReceipt(data.receipt_id, 'demo-dot', 'demo-status-text');
    } catch(e) {
        res.style.display = 'block';
        document.getElementById('demo-label').textContent = 'Error';
        document.getElementById('demo-confidence').textContent = e.message;
    }
    btn.disabled = false; btn.textContent = 'Prove it';
}

function setDot(dotId, textId, status) {
    const dot = document.getElementById(dotId);
    const text = document.getElementById(textId);
    dot.className = 'dot ' + status;
    text.textContent = status === 'proving' ? 'Proving...' : status === 'verified' ? 'Verified' : 'Failed';
    text.style.color = status === 'proving' ? 'var(--amber)' : status === 'verified' ? 'var(--green)' : 'var(--red)';
}

function pollReceipt(id, dotId, textId) {
    const timer = setInterval(async () => {
        try {
            const r = await fetch('/receipt/' + id, {headers:{Accept:'application/json'}});
            if (!r.ok) return;
            const data = await r.json();
            if (data.status === 'verified') { clearInterval(timer); setDot(dotId, textId, 'verified'); }
            else if (data.status === 'failed') { clearInterval(timer); setDot(dotId, textId, 'failed'); }
        } catch(e) { clearInterval(timer); setDot(dotId, textId, 'failed'); }
    }, 3000);
}

// --- Models ---
async function init() {
    try {
        const res = await fetch('/models');
        models = await res.json();
        renderModelCards();
        if (models.length > 0) selectModel(models[0].id);
    } catch(e) {
        document.getElementById('models-grid').textContent = 'Failed to load models.';
    }
}

function renderModelCards() {
    const grid = document.getElementById('models-grid');
    grid.innerHTML = models.map(m =>
        `<div class="model-card" id="card-${m.id}" onclick="selectModel('${m.id}')">
            <h3>${m.name}</h3>
            <div class="desc">${m.description}</div>
            <div class="meta">${m.input_type} &middot; ${m.labels.join(' / ')} &middot; trace ${m.trace_length}</div>
        </div>`
    ).join('');
}

function selectModel(id) {
    selectedModel = models.find(m => m.id === id);
    document.querySelectorAll('.model-card').forEach(c => c.classList.remove('selected'));
    const card = document.getElementById('card-' + id);
    if (card) card.classList.add('selected');
    renderInputs();
    document.getElementById('prove-btn').disabled = false;
}

// Default values per model for one-click usability
const MODEL_DEFAULTS = {
    sentiment: { text: "The economy showed strong growth this quarter as tech stocks surged" },
    spam_detector: { raw: [1, 0, 3, 2, 1, 0, 2, 1] },
    authorization: { fields: { budget: 10, trust: 5, amount: 3, category: 1, velocity: 2, day: 3, time: 1, risk: 0 } }
};

function renderInputs() {
    const m = selectedModel;
    if (!m) return;
    const area = document.getElementById('input-area');
    const defaults = MODEL_DEFAULTS[m.id] || {};
    if (m.input_type === 'text') {
        const val = defaults.text || '';
        area.innerHTML = `<div class="form-group"><label class="form-label">Input text</label><textarea id="text-input" placeholder="Enter text to classify...">${val}</textarea></div>`;
    } else if (m.fields) {
        let html = '<div class="form-group"><label class="form-label">Parameters</label><div class="fields-grid">';
        for (const f of m.fields) {
            const val = (defaults.fields && defaults.fields[f.name] !== undefined) ? defaults.fields[f.name] : f.min;
            html += `<div class="field-item"><label class="form-label">${f.name} <span class="field-range">${f.min}\u2013${f.max}</span></label><input type="number" data-field="${f.name}" min="${f.min}" max="${f.max}" value="${val}"></div>`;
        }
        html += '</div></div>';
        area.innerHTML = html;
    } else if (m.input_type === 'raw') {
        const val = defaults.raw ? JSON.stringify(defaults.raw) : '';
        area.innerHTML = `<div class="form-group"><label class="form-label">Raw input vector (JSON array of ${m.input_dim} integers)</label><textarea id="raw-input" placeholder="[0, 1, 2, ...]" rows="3">${val}</textarea></div>`;
    }
}

// --- Prove ---
async function prove() {
    const btn = document.getElementById('prove-btn');
    const errEl = document.getElementById('error');
    const resEl = document.getElementById('result');
    errEl.textContent = ''; resEl.style.display = 'none';
    btn.disabled = true; btn.textContent = 'Generating...';

    const m = selectedModel;
    if (!m) return;
    let body = { model_id: m.id, input: {} };

    if (m.input_type === 'text') {
        const text = document.getElementById('text-input')?.value || '';
        if (!text.trim()) { errEl.textContent = 'Please enter some text.'; btn.disabled = false; btn.textContent = 'Generate proof'; return; }
        body.input.text = text;
    } else if (m.fields) {
        body.input.fields = {};
        for (const f of m.fields) {
            const el = document.querySelector(`[data-field="${f.name}"]`);
            const val = parseInt(el?.value || '0');
            if (val < f.min || val > f.max) { errEl.textContent = `${f.name} must be ${f.min}\u2013${f.max}.`; btn.disabled = false; btn.textContent = 'Generate proof'; return; }
            body.input.fields[f.name] = val;
        }
    } else if (m.input_type === 'raw') {
        try { body.input.raw = JSON.parse(document.getElementById('raw-input')?.value || '[]'); }
        catch(e) { errEl.textContent = 'Invalid JSON array.'; btn.disabled = false; btn.textContent = 'Generate proof'; return; }
    }

    try {
        const r = await fetch('/prove', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
        const data = await r.json();
        if (!r.ok) throw new Error(data.error || 'Failed');

        document.getElementById('res-label').textContent = data.output.label;
        document.getElementById('res-confidence').textContent = (data.output.confidence * 100).toFixed(1) + '% confidence';
        setDot('res-dot', 'res-status-text', 'proving');
        const link = document.getElementById('res-link');
        link.href = '/receipt/' + data.receipt_id; link.textContent = 'View receipt';
        resEl.style.display = 'block';
        pollReceipt(data.receipt_id, 'res-dot', 'res-status-text');
    } catch(e) { errEl.textContent = e.message; }

    btn.disabled = false; btn.textContent = 'Generate proof';
}

// --- Upload & Prove ---
const uploadZone = document.getElementById('upload-zone');
const uploadFile = document.getElementById('upload-file');
uploadZone.addEventListener('dragover', e => { e.preventDefault(); uploadZone.classList.add('dragover'); });
uploadZone.addEventListener('dragleave', () => uploadZone.classList.remove('dragover'));
uploadZone.addEventListener('drop', e => { e.preventDefault(); uploadZone.classList.remove('dragover'); if (e.dataTransfer.files[0]) handleUploadFile(e.dataTransfer.files[0]); });
uploadFile.addEventListener('change', e => { if (e.target.files[0]) handleUploadFile(e.target.files[0]); });

function handleUploadFile(file) {
    window._uploadedFile = file;
    document.getElementById('upload-filename').textContent = file.name + ' (' + (file.size / 1024).toFixed(1) + ' KB)';
    document.getElementById('upload-form').style.display = 'block';
    uploadZone.style.display = 'none';
}

async function uploadAndProve() {
    const btn = document.getElementById('upload-prove-btn');
    const errEl = document.getElementById('upload-error');
    const resEl = document.getElementById('upload-result');
    errEl.textContent = ''; resEl.style.display = 'none';
    btn.disabled = true; btn.textContent = 'Uploading & proving...';

    const file = window._uploadedFile;
    if (!file) { errEl.textContent = 'No file selected.'; btn.disabled = false; btn.textContent = 'Upload & prove'; return; }

    const inputRaw = document.getElementById('up-input').value.trim();
    if (!inputRaw) { errEl.textContent = 'Input vector is required.'; btn.disabled = false; btn.textContent = 'Upload & prove'; return; }

    try { JSON.parse(inputRaw); } catch(e) { errEl.textContent = 'Invalid JSON input vector.'; btn.disabled = false; btn.textContent = 'Upload & prove'; return; }

    const form = new FormData();
    form.append('onnx_file', file);
    form.append('input_raw', inputRaw);
    form.append('input_dim', JSON.parse(inputRaw).length.toString());
    form.append('name', document.getElementById('up-name').value || 'uploaded');
    form.append('labels', document.getElementById('up-labels').value || '["class_0","class_1"]');
    form.append('trace_length', document.getElementById('up-trace').value || '16384');

    try {
        const r = await fetch('/prove/model', { method: 'POST', body: form });
        const data = await r.json();
        if (!r.ok) throw new Error(data.error || 'Failed');

        document.getElementById('up-res-label').textContent = data.output.label;
        document.getElementById('up-res-confidence').textContent = (data.output.confidence * 100).toFixed(1) + '% confidence';
        setDot('up-res-dot', 'up-res-status-text', 'proving');
        const link = document.getElementById('up-res-link');
        link.href = '/receipt/' + data.receipt_id; link.textContent = 'View receipt';
        resEl.style.display = 'block';
        pollReceipt(data.receipt_id, 'up-res-dot', 'up-res-status-text');
    } catch(e) { errEl.textContent = e.message; }

    btn.disabled = false; btn.textContent = 'Upload & prove';
}

init();
</script>
</body>
</html>
